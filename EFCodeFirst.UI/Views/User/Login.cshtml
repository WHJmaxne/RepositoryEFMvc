@{
    Layout = null;
}
@using EFCodeFirst.UI.Helper;
<!DOCTYPE html>

<html lang="zh-cn">
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="/Content/BootStrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/Content/JQSweetAlert/dist/sweetalert2.min.css" rel="stylesheet" />
    <script src="/Scripts/jquery-1.8.2.min.js"></script>
    <script src="/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="/Scripts/jquery.msgBox.js"></script>
    <script src="/Content/JQSweetAlert/dist/sweetalert2.min.js"></script>
    <title>Login</title>
    <style type="text/css">
        .formtop {
            height: 150px;
        }

        .formbody {
            background-color: gainsboro;
            height: 300px;
        }

        .fontcss {
            font-family: 微软雅黑;
            font-size: 22px;
        }

        .forminfo {
            color: red;
            line-height: 30px;
            font-family: 微软雅黑;
        }
    </style>
    <script type="text/javascript">
        $(function () {
            $('#UserName').blur(UserNameInfo);
            $('#UserPwd').blur(UserPwdInfo);
            $('#ValidataNum').blur(ValidataInfo);
            $('#LoginBtn').click(function () {
                var userName = $('#UserName').val();
                var userPwd = $('#UserPwd').val();
                var validata = $('#ValidataNum').val();
                if (userName == '' || userPwd == '' || validata == '') {
                    if (userName == '') {
                        $('#UserNameInfo').text('请输入用户名！');
                    }
                    if (userPwd == '') {
                        $('#UserPwdInfo').text('请输入密码！');
                    }
                    if (validata == '') {
                        $('#ValidataInfo').text('请输入验证码！');
                    }
                    return false;
                }
            })
            $('#valiImage').click(function () {
                this.src = "/User/ValidataImage?" + Math.random();
            });
        })
        function UserNameInfo() {
            if (this.value == '') {
                $('#UserNameInfo').text('请输入用户名！');
            } else {
                $('#UserNameInfo').text('');
            }
        }
        function UserPwdInfo() {
            if (this.value == '') {
                $('#UserPwdInfo').text('请输入密码！');
            } else {
                $('#UserPwdInfo').text('');
            }
        }
        function ValidataInfo() {
            if (this.value == '') {
                $('#ValidataInfo').text('请输入验证码！');
            } else {
                $('#ValidataInfo').text('');
            }
        }
        function OnSuccess(msg) {
            var jsonMsg = JSON.parse(msg.responseText);
            if (jsonMsg.Statu != 0) {
                //$.msgBoxObj.showMsgInfo(jsonMsg.Msg);
                swal({
                    title: '提示',
                    type: 'warning',
                    text: jsonMsg.Msg,
                    showCloseButton: false,
                    timer: 1500
                })
            } else {
                //$.msgBoxObj.showMsgOk(jsonMsg.Msg);
                swal({
                    title: '提示',
                    type: 'success',
                    text: jsonMsg.Msg,
                    showCloseButton: false,
                    timer: 1500
                })
                setTimeout(function () {
                    location.href = jsonMsg.BackUrl;
                }, 1500);
            }
        }
        function Onbegin() {
            //$.msgBoxObj.showMsgWait('登陆中...');
        }
    </script>
</head>
<body>
    <form class="form-horizontal" data-ajax="true" data-ajax-method="post" data-ajax-begin="Onbegin" data-ajax-complete="OnSuccess" id="form0">

        <div class="container-fluid">
            @using (Ajax.BeginForm("", new { controller = "", area = "" }, new AjaxOptions()
            {
                HttpMethod = "post",
                OnSuccess = "OnSuccess"
            }))
            {
                <div class="formtop">

                </div>
                <div class="formbody">
                    <br />
                    <div class="form-group">
                        <span class="col-lg-offset-5 fontcss">Login For Your Account</span>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-offset-4 col-lg-1 control-label" for="UserName">用户名</label>
                        <div class="col-lg-2">
                            <input type="text" name="UserName" id="UserName" value="admin" placeholder="UserName..." autocomplete="off" class="form-control" />
                        </div>
                        <span class="control-label forminfo" id="UserNameInfo"></span>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-offset-4 col-lg-1 control-label" for="UserPwd">密码</label>
                        <div class="col-lg-2">
                            <input type="password" name="UserPwd" id="UserPwd" value="admin" placeholder="UserPwd..." class="form-control" />
                        </div>
                        <span class="control-label forminfo" id="UserPwdInfo"></span>
                    </div>
                    <div class="form-group">
                        <label class="col-lg-offset-4 col-lg-1 control-label" for="ValidataNum">验证码</label>
                        <div class="col-lg-1">
                            <input type="text" name="ValidataNum" id="ValidataNum" placeholder="ValidataNum..." autocomplete="off" class="form-control" />
                        </div>
                        <img src="/User/ValidataImage" id="valiImage" />
                        <span class="control-label forminfo" id="ValidataInfo"></span>
                    </div>
                    <div class="col-lg-offset-5">
                        <input type="checkbox" name="RemUser" checked /><span>七天免登陆？</span>
                        <button type="submit" id="LoginBtn" class="btn btn-primary"> 登陆<span class="glyphicon glyphicon-chevron-right"></span></button>
                    </div>
                </div>
                <div class="formfoot">

                </div>
            }
        </div>

    </form>
</body>
</html>
